# ğŸ“˜ã€Šå·¥å…·é¡µé¢ï¼ˆTool Pageï¼‰æŠ€æœ¯æ–‡æ¡£ v3.0ã€‹

ï¼ˆé€‚ç”¨äº PDF-TOOLS / IMAGE-TOOLSï¼Œå®Œç¾æ¥å…¥æ’ä»¶ç³»ç»Ÿï¼‰

> æœ¬æ–‡æ¡£ä¸ºä½ æœ€ç»ˆç‰ˆæ’ä»¶åŒ–å·¥å…·ç«™çš„ **å”¯ä¸€æŠ€æœ¯æ ‡å‡†**ã€‚
> å‰ç«¯ã€åç«¯ã€æ’ä»¶ç³»ç»Ÿã€SEO å®Œæ•´è¦†ç›–ï¼Œå¯ç›´æ¥ç”¨äºå¼€å‘ä¸éªŒæ”¶ã€‚

---

# 0. å·¥å…·é¡µæ ¸å¿ƒæ¦‚å¿µ

**å·¥å…·é¡µä¸æ˜¯ç¡¬ç¼–ç é¡µé¢**ï¼Œæ‰€æœ‰å†…å®¹æ¥è‡ªæ’ä»¶ç³»ç»Ÿçš„ 3 ä¸ª JSONï¼š

| æ–‡ä»¶          | ä½œç”¨                            | å·¥å…·é¡µæ˜¯å¦ä¾èµ–ï¼Ÿ |
| ----------- | ----------------------------- | -------- |
| plugin.json | å·¥å…·åŸºç¡€ä¿¡æ¯ï¼ˆslug/category/apiPathï¼‰ | âœ” å¿…é¡»     |
| ui.json     | æ ‡é¢˜ã€æè¿°ã€FAQã€SEOã€å¤šè¯­è¨€æ–‡æ¡ˆ           | âœ” å¿…é¡»     |
| schema.json | å·¥å…· UI ç»“æ„ï¼ˆä¸Šä¼ ã€é€‰é¡¹ã€æŒ‰é’®ï¼‰            | âœ” å¿…é¡»     |

å·¥å…·é¡µçš„ä»»åŠ¡ï¼š

âœ” æ ¹æ® URL è§£æ slug / category / locale
âœ” è°ƒç”¨æ’ä»¶ç³»ç»Ÿ API è·å–æ’ä»¶æ•°æ®
âœ” æ ¹æ® schema.json åŠ¨æ€æ¸²æŸ“è¡¨å•
âœ” æ ¹æ® ui.json æ¸²æŸ“æ ‡é¢˜ã€æè¿°ã€FAQ
âœ” æ ¹æ® plugin.json è§¦å‘ API è°ƒç”¨
âœ” SEO è‡ªåŠ¨ç”Ÿæˆ

---

# 1. è·¯ç”±ç»“æ„ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```
/{locale}/{categoryId}/{slug}

ç¤ºä¾‹ï¼š
/zh/pdf-tools/merge
/en/image-tools/compress
```

| å‚æ•°         | è¯´æ˜                | ç¤ºä¾‹                       |
| ---------- | ----------------- | ------------------------ |
| locale     | è¯­è¨€ä»£å·              | en / zh / es             |
| categoryId | æ˜ å°„ categoryï¼ˆå›ºå®šå†™æ³•ï¼‰ | pdf-tools / image-tools  |
| slug       | å·¥å…·å”¯ä¸€æ ‡è¯†            | merge / split / compress |

---

# 2. å·¥å…·é¡µç›®å½•ç»“æ„

```
frontend/
â””â”€â”€ app/[locale]/[categoryId]/[slug]/
    â””â”€â”€ page.tsx            # å·¥å…·è¯¦æƒ…é¡µï¼ˆSSRï¼‰
components/
â”œâ”€â”€ tool/
â”‚   â”œâ”€â”€ SchemaRenderer.tsx  # è¡¨å•æ¸²æŸ“å™¨ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰
â”‚   â””â”€â”€ FileUploader.tsx    # ä¸Šä¼ ç»„ä»¶
â””â”€â”€ layout/
    â””â”€â”€ Breadcrumb.tsx
lib/
â””â”€â”€ plugin-api.ts           # è·å–æ’ä»¶æ•°æ®çš„ç»Ÿä¸€å°è£…
```

---

# 3. å·¥å…·é¡µé¡µé¢ç»“æ„ï¼ˆUI Blueprintï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Header             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     é¦–é¡µ > PDF Tools > Mergeâ”‚ Breadcrumb
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Iconï¼ˆemojiï¼‰             â”‚
â”‚   H1 æ ‡é¢˜                    â”‚
â”‚   æè¿°ï¼ˆdescriptionï¼‰        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SchemaRenderer (UI schema) â”‚
â”‚   â”œ ä¸Šä¼ åŒºåŸŸ                 â”‚
â”‚   â”œ é€‰é¡¹å‚æ•°åŒºåŸŸ             â”‚
â”‚   â”œ æäº¤æŒ‰é’®                 â”‚
â”‚   â”” ä¸‹è½½è¾“å‡ºæ–‡ä»¶             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           FAQ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Footer             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 4. å·¥å…·é¡µä¸»ç»„ä»¶ï¼ˆpage.tsxï¼‰

è·¯å¾„ï¼š

```
frontend/app/[locale]/[categoryId]/[slug]/page.tsx
```

## 4.1 åŠŸèƒ½èŒè´£

1. è§£æ URL å‚æ•°
2. è°ƒç”¨æ’ä»¶ç³»ç»Ÿ API è·å–å·¥å…·æ•°æ®
3. å¦‚æœå·¥å…·ä¸å­˜åœ¨ â†’ 404
4. æ¸²æŸ“ H1ã€æè¿°ã€å›¾æ ‡
5. æ¸²æŸ“ SchemaRendererï¼ˆåŠ¨æ€ UIï¼‰
6. æ¸²æŸ“ FAQ
7. ç”Ÿæˆ SEO å…ƒä¿¡æ¯

---

## 4.2 ä¸»ä»£ç ç»“æ„ï¼ˆæœ€ä½³å®è·µï¼‰

```ts
import { fetchPluginBySlug } from "@/lib/plugin-api";
import SchemaRenderer from "@/components/tool/SchemaRenderer";
import Breadcrumb from "@/components/layout/Breadcrumb";
import { notFound } from "next/navigation";

export default async function ToolPage({ params }) {
  const { slug, categoryId, locale } = params;

  const plugin = await fetchPluginBySlug(slug, locale);
  if (!plugin) return notFound();

  return (
    <div className="min-h-screen flex flex-col">
      <main className="flex-1 container mx-auto py-8">
        <Breadcrumb
          items={[
            { label: "é¦–é¡µ", href: `/${locale}` },
            { label: plugin.categoryName, href: `/${locale}/${categoryId}` },
            { label: plugin.title }
          ]}
        />

        <div className="text-center mb-10">
          <div className="text-6xl mb-2">{plugin.icon}</div>
          <h1 className="text-4xl font-bold">{plugin.h1}</h1>
          <p className="text-gray-500 mt-2">{plugin.description}</p>
        </div>

        <SchemaRenderer plugin={plugin} locale={locale} />

        {plugin.faq?.length > 0 && (
          <FAQSection faq={plugin.faq} />
        )}
      </main>
    </div>
  );
}
```

---

# 5. SEO ç”Ÿæˆï¼ˆgenerateMetadataï¼‰

ä½ çš„ SEO å¿…é¡»æ¥è‡ª **ui.json**ã€‚

```ts
export async function generateMetadata({ params }) {
  const { slug, categoryId, locale } = params;
  const plugin = await fetchPluginBySlug(slug, locale);

  if (!plugin) return {};

  return {
    title: `${plugin.title} - TooliBox`,
    description: plugin.description,
    alternates: {
      canonical: `${baseUrl}/${locale}/${categoryId}/${slug}`,
      languages: {
        en: `${baseUrl}/en/${categoryId}/${slug}`,
        zh: `${baseUrl}/zh/${categoryId}/${slug}`,
        es: `${baseUrl}/es/${categoryId}/${slug}`,
      },
    },
  };
}
```

---

# 6. SchemaRendererï¼ˆåŠ¨æ€ UI æ ¸å¿ƒï¼‰

å·¥å…·é¡µé¢æœ€å¤§çš„äº®ç‚¹ï¼š
**å‰ç«¯ä¸ç”¨å†™ä»»ä½•è¡¨å•ä»£ç ï¼Œå…¨éƒ¨ç”± schema.json åŠ¨æ€æ¸²æŸ“ã€‚**

schema.json ç¤ºä¾‹ï¼š

```json
{
  "upload": {
    "multiple": true,
    "types": ["pdf"],
    "maxSize": 100000000
  },
  "options": [
    {
      "name": "quality",
      "type": "select",
      "label": { "zh": "å‹ç¼©è´¨é‡", "en": "Quality" },
      "choices": [
        { "value": "low", "label": "Low" },
        { "value": "medium", "label": "Medium" },
        { "value": "high", "label": "High" }
      ]
    }
  ],
  "submitText": {
    "zh": "å‹ç¼© PDF",
    "en": "Compress PDF"
  },
  "outputType": "file"
}
```

SchemaRenderer.tsx è´£ä»»ï¼š

âœ” æ¸²æŸ“ä¸Šä¼ åŒº
âœ” æ¸²æŸ“é€‰é¡¹è¡¨å•
âœ” ç®¡ç†çŠ¶æ€ï¼ˆfiles, optionsï¼‰
âœ” è°ƒç”¨ API
âœ” ä¸‹è½½ç»“æœ

---

# 7. å·¥å…· API è°ƒç”¨æµç¨‹

POST `/api/{category}/{slug}`
ï¼ˆåç«¯è‡ªåŠ¨é€šè¿‡æ’ä»¶ç³»ç»Ÿæ³¨å†Œï¼‰

FormData æ ¼å¼ç»Ÿä¸€ï¼š

```
files[] æˆ– file
options (JSON)
```

API è¿”å› Blob â†’ æµè§ˆå™¨ä¸‹è½½ã€‚

---

# 8. 404 é”™è¯¯å¤„ç†

å¦‚æœæ’ä»¶ä¸å­˜åœ¨ï¼š

```
/plugins/{slug}/ ç›®å½•ä¸å­˜åœ¨
plugin.json/ui.json/schema.json ç¼ºå¤±
æ’ä»¶æœªåœ¨åç«¯æ³¨å†Œ
```

API è¿”å›å¤±è´¥ â†’ `notFound()` â†’ é»˜è®¤ 404 é¡µé¢ã€‚

---

# 9. å›½é™…åŒ–ï¼ˆi18nï¼‰è§„åˆ™

å·¥å…·é¡µé¢æ‰€æœ‰å†…å®¹æ¥è‡ªæ’ä»¶ï¼š

* title
* description
* h1
* FAQ
* submitText
* option labels

ä½ åªéœ€è¦ç¡®ä¿ï¼š

```
ui.json[lang] å­˜åœ¨
schema.json labels æ”¯æŒå¤šè¯­è¨€
```

å‰ç«¯è‡ªåŠ¨åˆ‡è¯­è¨€ã€‚

---

# 10. category æ˜ å°„ï¼ˆæ¨èå›ºå®šè¡¨ï¼‰

```ts
export const CATEGORY_MAP = {
  "pdf-tools": "pdf",
  "image-tools": "image",
};

export const CATEGORY_NAME = {
  "pdf-tools": { zh: "PDF å·¥å…·", en: "PDF Tools" },
  "image-tools": { zh: "å›¾ç‰‡å·¥å…·", en: "Image Tools" },
};
```

---

# 11. ä¸‹è½½æ–‡ä»¶è¾“å‡ºè§„åˆ™

æ–‡ä»¶åå»ºè®®è¿™æ ·æ„é€ ï¼š

```
{slug}-toolibox-{timestamp}.{ext}
```

ext æ ¹æ® outputType å†³å®šï¼š

| outputType | æ‰©å±•å         |
| ---------- | ----------- |
| file       | pdf/png/jpg |
| zip        | zip         |
| json       | json        |

---

# 12. å·¥å…·é¡µé¢çš„æœ€ç»ˆå‡†åˆ™ï¼ˆå¿…é¡»éµå®ˆï¼‰

âœ” å·¥å…·é¡µå¿…é¡»å®Œå…¨ä¾èµ–æ’ä»¶ç³»ç»Ÿ
âœ” ä¸å…è®¸ç¡¬ç¼–ç ä»»ä½•å·¥å…·åç§°
âœ” ä¸å…è®¸æœ‰å ä½å·¥å…·
âœ” slug ä¸å­˜åœ¨ â†’ 404
âœ” ui.json å†³å®šæ‰€æœ‰æ–‡æ¡ˆ
âœ” schema.json å†³å®š UI
âœ” plugin.json å†³å®š API path

å·¥å…·é¡µ = "è¯»æ’ä»¶ â†’ æ¸²æŸ“" çš„çº¯å±•ç¤ºå±‚ã€‚
