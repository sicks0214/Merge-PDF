# å·¥å…·é¡µé¢æŠ€æœ¯æ–‡æ¡£ --- v4.0ï¼ˆæœ€ç»ˆç‰ˆï¼‰

é€‚ç”¨äº PDF-TOOLS / IMAGE-TOOLS / æ‰€æœ‰æœªæ¥å·¥å…·\
ï¼ˆå‰åç«¯æ’ä»¶åŒ–ç³»ç»Ÿ + SSR å·¥å…·é¡µ + åŠ¨æ€ UI æ¸²æŸ“è§„èŒƒï¼‰

------------------------------------------------------------------------

## 0. æ–‡æ¡£ç›®çš„

æœ¬æŠ€æœ¯æ–‡æ¡£ç”¨äºæŒ‡å¯¼ï¼š

-   æ„å»º"æ’ä»¶é©±åŠ¨"çš„å‰ç«¯å·¥å…·é¡µé¢\
-   ä½¿ç”¨ ui.json æ§åˆ¶æ–‡æ¡ˆ/UI/SEO\
-   ä½¿ç”¨ schema.json æ§åˆ¶åŠ¨æ€é€‰é¡¹ä¸è¡¨å•\
-   ä½¿ç”¨ handler æ§åˆ¶å·¥å…·æ ¸å¿ƒé€»è¾‘\
-   å·¥å…·é¡µé¢å¦‚ä½•é€šè¿‡ SSR å®Œæ•´æ¸²æŸ“ SEO\
-   å·¥å…·é¡µé¢å¦‚ä½•ä½œä¸ºçº¯å±•ç¤ºå±‚ï¼Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘

æœ¬æŠ€æœ¯æ–‡æ¡£é€‚ç”¨äºæ‰€æœ‰å·¥å…·ï¼Œå¦‚ï¼š

-   Merge PDF\
-   Split PDF\
-   Compress Image\
-   JPG â†” PNG è½¬æ¢\
-   æœªæ¥æ–°å¢çš„ä»»ä½•å·¥å…·

------------------------------------------------------------------------

## 1. å·¥å…·é¡µé¢è¿è¡ŒåŸç†ï¼ˆæ ¸å¿ƒï¼‰

å·¥å…·é¡µ = çº¯å±•ç¤ºå±‚ï¼ˆUI Shellï¼‰ + æ’ä»¶æ•°æ®é©±åŠ¨

æµç¨‹ï¼š

1.  è§£æ URLï¼ˆlocale/category/slugï¼‰
2.  åç«¯æ’ä»¶ç³»ç»Ÿè¯»å–è¯¥æ’ä»¶çš„ JSON é…ç½®
3.  Next.js SSR generateMetadata ç”Ÿæˆ SEO
4.  å‰ç«¯ ToolClient.tsx æ ¹æ® schema.json åŠ¨æ€æ¸²æŸ“ UI
5.  ç”¨æˆ·æäº¤å â†’ POST /api/{category}/{slug} â†’ æ’ä»¶ handler æ‰§è¡Œå¤„ç†

å‰ç«¯ä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚

------------------------------------------------------------------------

## 2. è·¯ç”±è§„èŒƒï¼ˆå¼ºåˆ¶è¦æ±‚ï¼‰

    /{locale}/{categoryId}/{slug}

ç¤ºä¾‹ï¼š

    /zh/pdf-tools/merge-pdf
    /en/image-tools/resize-image

å­—æ®µè¯´æ˜ï¼š

-   localeï¼šå¤šè¯­è¨€
-   categoryIdï¼šå‰ç«¯åˆ†ç±»åï¼ˆpdf-tools / image-toolsï¼‰
-   slugï¼šå·¥å…·å”¯ä¸€æ ‡è¯†

------------------------------------------------------------------------

## 3. å·¥å…·ç›®å½•ç»“æ„ï¼ˆæ’ä»¶å±‚ï¼‰

æ‰€æœ‰æ’ä»¶å¿…é¡»æ”¾åœ¨ï¼š

    backend/plugins/{tool-slug}/

ç¤ºä¾‹ï¼š

    backend/plugins/merge-pdf/
    backend/plugins/split-pdf/

å¿…å«æ–‡ä»¶ï¼š

    plugin.json
    ui.json
    schema.json
    handler/index.ts æˆ– handler.js

ç›®å½•åå¿…é¡»ä¸ slug å®Œå…¨ä¸€è‡´ã€‚

------------------------------------------------------------------------

## 4. plugin.jsonï¼ˆå·¥å…·åŸºç¡€é…ç½®ï¼‰

ç¤ºä¾‹ï¼š

``` json
{
  "name": "Merge PDF",
  "slug": "merge-pdf",
  "category": "pdf",
  "categoryId": "pdf-tools",
  "apiPath": "/api/pdf/merge-pdf",
  "order": 1
}
```

å­—æ®µè¯´æ˜ï¼š

-   slugï¼šå·¥å…·å”¯ä¸€ IDï¼ˆå¿…é¡»ä¸ç›®å½•ååŒåï¼‰
-   categoryï¼šåç«¯ API åˆ†ç±»
-   categoryIdï¼šå‰ç«¯ URL åˆ†ç±»
-   apiPathï¼šhandler API è·¯å¾„
-   orderï¼šæ’åº

------------------------------------------------------------------------

## 5. ui.jsonï¼ˆå·¥å…· UI + SEO + FAQ + æ–‡æ¡ˆï¼‰

ç¤ºä¾‹ç»“æ„ï¼š

``` json
{
  "categoryName": { "en": "PDF Tools", "zh": "PDF å·¥å…·" },
  "title": { "en": "Merge PDF Online", "zh": "åœ¨çº¿åˆå¹¶ PDF" },
  "description": { "en": "Merge documents...", "zh": "åœ¨çº¿å¿«é€Ÿåˆå¹¶ PDF..." },
  "h1": { "en": "Merge PDF", "zh": "åˆå¹¶ PDF" },
  "icon": "ğŸ“„",
  "subtitle": {...},
  "features": {...},
  "breadcrumb": {
    "home": { "en": "Home", "zh": "é¦–é¡µ" },
    "section": { "en": "PDF Tools", "zh": "PDF å·¥å…·" },
    "current": { "en": "Merge PDF", "zh": "åˆå¹¶ PDF" }
  },

  "useCases": {
    "sectionTitle": { "en": "Recommended Settings", "zh": "æ¨èè®¾ç½®" },
    "printing": {
      "title": {"en":"Print Optimization","zh":"æ‰“å°ä¼˜åŒ–"},
      "description": {"en":"Best for printing.","zh":"ç”¨äºæ‰“å°ä¼˜åŒ–ã€‚"},
      "action": {"en":"Use This Setting", "zh":"ä½¿ç”¨æ­¤è®¾ç½®"}
    }
  },

  "faq": { ... },
  "result": { ... }
}
```

æ‰€æœ‰æ–‡æ¡ˆå¿…é¡»æ”¾è¿™é‡Œã€‚

------------------------------------------------------------------------

## 6. schema.jsonï¼ˆåŠ¨æ€ UI é…ç½®ï¼‰

ç¤ºä¾‹ï¼š

``` json
{
  "upload": {
    "multiple": true,
    "types": ["application/pdf"],
    "maxSize": 104857600,
    "maxFiles": 20
  },

  "options": [
    {
      "name": "optimizeForPrint",
      "type": "checkbox",
      "default": false,
      "useCaseKey": "printing",
      "label": { "en": "Optimize for Print", "zh": "ä¼˜åŒ–æ‰“å°" }
    }
  ],

  "submitText": {
    "en": "Merge PDF Files",
    "zh": "åˆå¹¶ PDF æ–‡ä»¶"
  },

  "outputType": "file"
}
```

å­—æ®µè¯´æ˜ï¼š

-   uploadï¼šä¸Šä¼ è§„åˆ™
-   optionsï¼šåŠ¨æ€é€‰é¡¹ç»“æ„ï¼ˆç”±å‰ç«¯è‡ªåŠ¨æ¸²æŸ“ï¼‰
-   submitTextï¼šæŒ‰é’®æ–‡å­—
-   outputTypeï¼šfile/json/zip

------------------------------------------------------------------------

## 7. handlerï¼ˆåç«¯å¤„ç†ç¨‹åºï¼‰

æ¨èç»“æ„ï¼š

    backend/plugins/merge-pdf/handler/index.ts

ç¤ºä¾‹ï¼š

``` ts
export default async function handler(req, res) {
  const files = req.files;
  const options = JSON.parse(req.body.options);

  const result = await mergePDF(files, options);

  res.sendFile(result);
}
```

------------------------------------------------------------------------

## 8. å·¥å…·é¡µ SSR ç»“æ„ï¼ˆNext.jsï¼‰

è·¯å¾„ï¼š

    app/[locale]/[categoryId]/[slug]/page.tsx

### SEOï¼ˆSSRï¼‰

``` ts
export async function generateMetadata({ params }) {
  const plugin = await getPluginData(params.slug, params.locale);
  return {
    title: plugin.ui.title,
    description: plugin.ui.description,
    alternates: { canonical: ... },
  };
}
```

------------------------------------------------------------------------

## 9. ToolClient.tsxï¼ˆæ ¸å¿ƒ UIï¼‰

å®Œå…¨ç”±æ’ä»¶æ•°æ®é©±åŠ¨ï¼š

-   åŠ¨æ€åˆå§‹åŒ– options çŠ¶æ€
-   ä» ui.categoryName è·å–åˆ†ç±»åç§°
-   ä» schema.options æ¸²æŸ“è¡¨å•
-   ä» ui.useCases æ¸²æŸ“ UseCaseCards
-   è°ƒç”¨åç«¯ API è§¦å‘ handler

### å¿…é¡»ä¸å‡ºç°ä»»ä½•ç¡¬ç¼–ç å·¥å…·åç§°æˆ–é€‰é¡¹åç§°ã€‚

------------------------------------------------------------------------

## 10. UseCaseCardsï¼ˆåŠ¨æ€ UI å¡ç‰‡ï¼‰

åŠŸèƒ½ï¼š

-   ä» schema.json æ‰¾åˆ° useCaseKey
-   åœ¨ ui.json ä¸­å®šä½ useCases æ•°æ®
-   è‡ªåŠ¨æ¸²æŸ“ UI å¡ç‰‡

ä¸€ä¸ªæ’ä»¶å†³å®šä¸€ç§å·¥å…·çš„æ‰€æœ‰ UI å±•ç¤ºã€‚

------------------------------------------------------------------------

## 11. åç«¯æ’ä»¶åŠ è½½æœºåˆ¶

æ’ä»¶ç³»ç»Ÿå¯åŠ¨æ—¶æ‰§è¡Œï¼š

1.  æ‰«æ backend/plugins/\*
2.  å¯¹æ¯ä¸ªæ’ä»¶è¯»å–ï¼š
    -   plugin.json
    -   ui.json
    -   schema.json
    -   handler
3.  è‡ªåŠ¨æŒ‚è½½ APIï¼š

```{=html}
<!-- -->
```
    /api/{category}/{slug}

4.  å‘å‰ç«¯æä¾›æ’ä»¶åˆ—è¡¨ä¸å•ç‹¬å·¥å…·æ•°æ®ã€‚

æ–°å¢æ’ä»¶æ— éœ€ä¿®æ”¹ä»»ä½•å‰ç«¯æˆ–ä¸»åç«¯ä»£ç ã€‚

------------------------------------------------------------------------

## 12. æŠ€æœ¯éªŒè¯ï¼ˆæœ¬ç‰ˆæœ¬æ­£ç¡®ï¼‰

æœ¬ v4.0 æ–‡æ¡£æ»¡è¶³ï¼š

-   å®Œæ•´æ’ä»¶åŒ–æ¶æ„
-   SSR + SEO 100% å¯ç”¨
-   åŠ¨æ€ UI + åŠ¨æ€æ–‡æ¡ˆ
-   æ— é™æ‰©å±•æ–°å·¥å…·
-   å‰ç«¯æ— ä¸šåŠ¡é€»è¾‘
-   åç«¯è‡ªåŠ¨æ‰©å±• API
-   å®Œæ•´æ”¯æŒ i18n
-   å·¥å…·é¡µä¸å†éœ€è¦å ä½æ–‡ä»¶

æ˜¯å·¥ä¸šçº§çš„å·¥å…·ç³»ç»Ÿæ¶æ„ã€‚

------------------------------------------------------------------------

## âœ” è¿™æ˜¯æœ€ç»ˆçš„å¯éƒ¨ç½²ç‰ˆæœ¬æ–‡æ¡£ï¼ˆv4.0ï¼‰

éœ€è¦æˆ‘ç»§ç»­ç”Ÿæˆï¼š

-   æ’ä»¶æ¨¡æ¿ï¼ˆå¯å¤åˆ¶ç”¨ï¼‰
-   å®Œæ•´ç¤ºä¾‹æ’ä»¶
-   plugin-loader.ts
-   å·¥å…·å¼€å‘æµç¨‹æŒ‡å—

éšæ—¶å‘Šè¯‰æˆ‘ã€‚
